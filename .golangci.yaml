 #
  # Copyright 2022 ZUP IT SERVICOS EM TECNOLOGIA E INOVACAO SA
  #
  # Licensed under the Apache License, Version 2.0 (the "License");
  # you may not use this file except in compliance with the License.
  # You may obtain a copy of the License at
  #
  #  http://www.apache.org/licenses/LICENSE-2.0
  #
  # Unless required by applicable law or agreed to in writing, software
  # distributed under the License is distributed on an "AS IS" BASIS,
  # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  # See the License for the specific language governing permissions and
  # limitations under the License.
#

issues:
  exclude-rules:
    - linters:
        - wrapcheck
      text: "error returned from interface method should be wrapped:"
    - linters:
        - gocritic
      path: main.go
      text: "exitAfterDefer:"
    - linters:
        - gosec
      source: \.FromUnstructured\(&?[a-zA-Z]+,\s[a-zA-Z]+\)
      text: "G601:"
  max-issues-per-linter: 0
  max-same-issues: 0

linters:
  disable:
    - exhaustivestruct
    - gci
    - maligned # replaced by govet 'fieldalignment'
    - scopelint # replaced by 'exportloopref'
  enable:
    - gochecknoinits
    - ifshort
    - lll
    - predeclared
  presets:
    - unused
    - bugs
    - error
    - metalinter
    - performance
    - format
    - import
    - module
    - test
    - comment

linters-settings:
  godot:
    period: false
  staticcheck:
    checks: ["all", "-SA9004"]
    go: "1.17"
  wrapcheck:
    ignorePackageGlobs:
      - github.com/tiagoangelozup/charles-alpha/*
    ignoreSigRegexps:
      - func\s\(\*github\.com/angelokurtis/reconciler\.[a-zA-Z]+\)\.[a-zA-Z]+\([^)]*\)
      - func\s\(\*sigs\.k8s\.io/controller-runtime/pkg/builder\.Builder\)\.Complete\([^)]*\)

output:
  format: colored-line-number
  print-issued-lines: true
  print-linter-name: true
  sort-results: false

run:
  issues-exit-code: 1
  tests: false
  timeout: 10m
